{"ast":null,"code":"import _slicedToArray from\"C:/Users/Momen/Desktop/Prew-Crew/UsersManger/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useContext}from'react';import classes from'./Registering.module.css';import{useHistory}from'react-router';import AuthContxt from'../../store/auth-context';import{GoogleLogin}from'react-google-login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Registering=function Registering(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var emailRef=useRef();var passwordRef=useRef();var history=useHistory();var ctx=useContext(AuthContxt);var switchAuthModeHandler=function switchAuthModeHandler(){setIsLogin(function(prev){return!prev;});};var responseSuccessGoogle=function responseSuccessGoogle(res){console.log(res);fetch('http://localhost:3001/user/googlelogin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tokenId:res.tokenId,email:res.profileObj.email,name:res.profileObj.name})}).then(function(res){return res.json();}).then(function(data){if(data.response==='GoogleGood'){console.log(data);ctx.login(data.googleUser.tokenId);history.replace('/AllUsers');}else{ctx.login(data.tokenId);history.replace('/identefier');console.log(data);}}).catch(function(error){return console.log(error);});};var responseErrorGoogle=function responseErrorGoogle(response){console.log(response);};var submitHandeler=function submitHandeler(e){e.preventDefault();var entredPassword=passwordRef.current.value;var entredEmail=emailRef.current.value;if(entredEmail.trim().length===0||entredPassword.trim().length===0){setIsValid(false);return;}if(entredEmail.trim().length>0||entredPassword.trim().length>0){setIsValid(true);}var loginUrl='http://localhost:3001/user/login';var signUpUrl='http://localhost:3001/user/signup';var url;if(isLogin){url=loginUrl;fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:entredEmail,password:entredPassword})}).then(function(res){return res.json();}).then(function(data){if(data.response==='valid'){ctx.login(data.user._id);history.replace('/AllUsers');}else{setError(true);console.log(error);}}).catch(function(error){return console.log(error);});}else{url=signUpUrl;fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:entredEmail,password:entredPassword})}).then(function(res){return res.json();}).then(function(data){console.log(data._id);ctx.login(data._id);history.replace('/identefier');}).catch(function(error){setError(true);console.log(error);});}};return/*#__PURE__*/_jsxs(\"section\",{className:classes.container,children:[/*#__PURE__*/_jsx(\"h1\",{children:isLogin?'Login':'Sign Up'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandeler,className:classes.auth,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"773069387302-d5cih0oc4n17tn3lq9d412dm6tokh8sb.apps.googleusercontent.com\",buttonText:\"Continue With Google\",onSuccess:responseSuccessGoogle,onFailure:responseErrorGoogle,cookie:\"SameSite=Strict\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.divider,children:[/*#__PURE__*/_jsx(\"hr\",{className:classes.left}),/*#__PURE__*/_jsx(\"p\",{children:\"OR\"}),/*#__PURE__*/_jsx(\"hr\",{className:classes.right})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.control,\" \").concat(!isValid&&classes.invalid),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Your Email\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"current-email\",ref:emailRef,type:\"email\",id:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.control,\" \").concat(!isValid&&classes.invalid),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Your Password\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"current-password\",ref:passwordRef,type:\"password\",id:\"password\"})]}),!isValid&&/*#__PURE__*/_jsx(\"div\",{className:classes.message,children:\"These Fields Can't Be Empty\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:classes.message,children:\"Please Double Check Your Data\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{children:isLogin?'Login':'Create Account'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.toggle,onClick:switchAuthModeHandler,children:isLogin?'Create new account':'Login with existing account'})]})]})]});};export default Registering;","map":{"version":3,"sources":["C:/Users/Momen/Desktop/Prew-Crew/UsersManger/Client/src/components/RegisterForm/RegisterForm.js"],"names":["React","useState","useRef","useContext","classes","useHistory","AuthContxt","GoogleLogin","Registering","isLogin","setIsLogin","isValid","setIsValid","error","setError","emailRef","passwordRef","history","ctx","switchAuthModeHandler","prev","responseSuccessGoogle","res","console","log","fetch","method","headers","body","JSON","stringify","tokenId","email","profileObj","name","then","json","data","response","login","googleUser","replace","catch","responseErrorGoogle","submitHandeler","e","preventDefault","entredPassword","current","value","entredEmail","trim","length","loginUrl","signUpUrl","url","password","user","_id","container","auth","actions","divider","left","right","control","invalid","message","toggle"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useContext } from 'react';\r\nimport classes from './Registering.module.css';\r\nimport { useHistory } from 'react-router';\r\nimport AuthContxt from '../../store/auth-context';\r\nimport { GoogleLogin } from 'react-google-login';\r\n\r\nconst Registering = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [isValid, setIsValid] = useState(true);\r\n  const [error, setError] = useState(false);\r\n\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const history = useHistory();\r\n  const ctx = useContext(AuthContxt);\r\n\r\n  const switchAuthModeHandler = () => {\r\n    setIsLogin((prev) => !prev);\r\n  };\r\n\r\n  const responseSuccessGoogle = (res) => {\r\n    console.log(res);\r\n    fetch('http://localhost:3001/user/googlelogin', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        tokenId: res.tokenId,\r\n        email: res.profileObj.email,\r\n        name: res.profileObj.name,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.response === 'GoogleGood') {\r\n          console.log(data);\r\n          ctx.login(data.googleUser.tokenId);\r\n          history.replace('/AllUsers');\r\n        } else {\r\n          ctx.login(data.tokenId);\r\n          history.replace('/identefier');\r\n          console.log(data);\r\n        }\r\n      })\r\n      .catch((error) => console.log(error));\r\n  };\r\n\r\n  const responseErrorGoogle = (response) => {\r\n    console.log(response);\r\n  };\r\n\r\n  const submitHandeler = (e) => {\r\n    e.preventDefault();\r\n    const entredPassword = passwordRef.current.value;\r\n    const entredEmail = emailRef.current.value;\r\n\r\n    if (entredEmail.trim().length === 0 || entredPassword.trim().length === 0) {\r\n      setIsValid(false);\r\n      return;\r\n    }\r\n    if (entredEmail.trim().length > 0 || entredPassword.trim().length > 0) {\r\n      setIsValid(true);\r\n    }\r\n    const loginUrl = 'http://localhost:3001/user/login';\r\n    const signUpUrl = 'http://localhost:3001/user/signup';\r\n    let url;\r\n\r\n    if (isLogin) {\r\n      url = loginUrl;\r\n\r\n      fetch(url, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          email: entredEmail,\r\n          password: entredPassword,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data.response === 'valid') {\r\n            ctx.login(data.user._id);\r\n            history.replace('/AllUsers');\r\n          } else {\r\n            setError(true);\r\n            console.log(error);\r\n          }\r\n        })\r\n        .catch((error) => console.log(error));\r\n    } else {\r\n      url = signUpUrl;\r\n\r\n      fetch(url, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          email: entredEmail,\r\n          password: entredPassword,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          console.log(data._id);\r\n          ctx.login(data._id);\r\n          history.replace('/identefier');\r\n        })\r\n        .catch((error) => {\r\n          setError(true);\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className={classes.container}>\r\n      <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\r\n      <form onSubmit={submitHandeler} className={classes.auth}>\r\n        {/* Google Button */}\r\n        <div className={classes.actions}>\r\n          <GoogleLogin\r\n            clientId='773069387302-d5cih0oc4n17tn3lq9d412dm6tokh8sb.apps.googleusercontent.com'\r\n            buttonText='Continue With Google'\r\n            onSuccess={responseSuccessGoogle}\r\n            onFailure={responseErrorGoogle}\r\n            cookie='SameSite=Strict'\r\n          />\r\n        </div>\r\n        <div className={classes.divider}>\r\n          <hr className={classes.left}></hr>\r\n          <p>OR</p>\r\n          <hr className={classes.right}></hr>\r\n        </div>\r\n        <div className={`${classes.control} ${!isValid && classes.invalid}`}>\r\n          <label htmlFor='email'>Your Email</label>\r\n          <input\r\n            autoComplete='current-email'\r\n            ref={emailRef}\r\n            type='email'\r\n            id='email'\r\n          />\r\n        </div>\r\n\r\n        <div className={`${classes.control} ${!isValid && classes.invalid}`}>\r\n          <label htmlFor='password'>Your Password</label>\r\n          <input\r\n            autoComplete='current-password'\r\n            ref={passwordRef}\r\n            type='password'\r\n            id='password'\r\n          />\r\n        </div>\r\n        {/* ERRORS MESSAGS */}\r\n        {!isValid && (\r\n          <div className={classes.message}>These Fields Can't Be Empty</div>\r\n        )}\r\n        {error && (\r\n          <div className={classes.message}>Please Double Check Your Data</div>\r\n        )}\r\n        <div className={classes.actions}>\r\n          {/* Submit Button */}\r\n          <button>{isLogin ? 'Login' : 'Create Account'}</button>\r\n\r\n          {/* Switch Button Between ( Login // Singup ) */}\r\n          <button\r\n            type='button'\r\n            className={classes.toggle}\r\n            onClick={switchAuthModeHandler}\r\n          >\r\n            {isLogin ? 'Create new account' : 'Login with existing account'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Registering;\r\n"]},"metadata":{},"sourceType":"module"}